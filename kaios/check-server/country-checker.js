LyoqDQogKiBDb3VudHJ5IEJsb2NrZXIgU2NyaXB0DQogKiBHaXRIdWI6IGh0
dHBzOi8vZ2l0aHViLmNvbS95b3VydXNlcm5hbWUvY291bnRyeS1ibG9ja2Vy
DQogKiBWZXJzaW9uOiAxLjAuMA0KICovDQoNCmNsYXNzIENvdW50cnlCbG9j
a2VyIHsNCiAgICBjb25zdHJ1Y3RvcigpIHsNCiAgICAgICAgdGhpcy5jb25m
aWcgPSBudWxsOw0KICAgICAgICB0aGlzLmN1cnJlbnRDb3VudHJ5ID0gbnVs
bDsNCiAgICAgICAgdGhpcy5pc0Jhbm5lZCA9IGZhbHNlOw0KICAgICAgICB0
aGlzLmNvbmZpZ1BhdGggPSAnY29uZmlnLmpzb24nOw0KICAgICAgICB0aGlz
LmluaXQoKTsNCiAgICB9DQoNCiAgICBhc3luYyBpbml0KCkgew0KICAgICAg
ICB0cnkgew0KICAgICAgICAgICAgLy8gTG9hZCBjb25maWd1cmF0aW9uDQog
ICAgICAgICAgICBhd2FpdCB0aGlzLmxvYWRDb25maWcoKTsNCiAgICAgICAg
ICAgIA0KICAgICAgICAgICAgaWYgKCF0aGlzLmNvbmZpZy5lbmFibGVkKSB7
DQogICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ/CflJMgQ291bnRyeSBi
bG9ja2VyIGlzIGRpc2FibGVkJyk7DQogICAgICAgICAgICAgICAgcmV0dXJu
Ow0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAvLyBHZXQgdXNlcidz
IGNvdW50cnkNCiAgICAgICAgICAgIGF3YWl0IHRoaXMuZGV0ZWN0Q291bnRy
eSgpOw0KICAgICAgICAgICAgDQogICAgICAgICAgICAvLyBDaGVjayBpZiBi
YW5uZWQNCiAgICAgICAgICAgIHRoaXMuY2hlY2tCYW5TdGF0dXMoKTsNCiAg
ICAgICAgICAgIA0KICAgICAgICAgICAgLy8gU2V0IHVwIHBlcmlvZGljIGNo
ZWNraW5nDQogICAgICAgICAgICBpZiAodGhpcy5jb25maWcuY2hlY2tfaW50
ZXJ2YWwgPiAwKSB7DQogICAgICAgICAgICAgICAgc2V0SW50ZXJ2YWwoKCkg
PT4gdGhpcy5jaGVja0JhblN0YXR1cygpLCB0aGlzLmNvbmZpZy5jaGVja19p
bnRlcnZhbCAqIDEwMDApOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9IGNh
dGNoIChlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcign4p2M
IEluaXRpYWxpemF0aW9uIGVycm9yOicsIGVycm9yKTsNCiAgICAgICAgfQ0K
ICAgIH0NCg0KICAgIGFzeW5jIGxvYWRDb25maWcoKSB7DQogICAgICAgIHRy
eSB7DQogICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgp
LmdldFRpbWUoKTsNCiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdh
aXQgZmV0Y2goYCR7dGhpcy5jb25maWdQYXRofT90PSR7dGltZXN0YW1wfWAp
Ow0KICAgICAgICAgICAgDQogICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9r
KSB7DQogICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBIVFRQICR7
cmVzcG9uc2Uuc3RhdHVzfWApOw0KICAgICAgICAgICAgfQ0KICAgICAgICAg
ICAgDQogICAgICAgICAgICB0aGlzLmNvbmZpZyA9IGF3YWl0IHJlc3BvbnNl
Lmpzb24oKTsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfinIUgQ29uZmln
dXJhdGlvbiBsb2FkZWQ6JywgdGhpcy5jb25maWcpOw0KICAgICAgICB9IGNh
dGNoIChlcnJvcikgew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcign4pqg
77iPIEVycm9yIGxvYWRpbmcgY29uZmlnLCB1c2luZyBkZWZhdWx0czonLCBl
cnJvcik7DQogICAgICAgICAgICB0aGlzLmNvbmZpZyA9IHRoaXMuZ2V0RGVm
YXVsdENvbmZpZygpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgZ2V0RGVm
YXVsdENvbmZpZygpIHsNCiAgICAgICAgcmV0dXJuIHsNCiAgICAgICAgICAg
IGVuYWJsZWQ6IHRydWUsDQogICAgICAgICAgICBiYW5uZWRfY291bnRyaWVz
OiBbXSwNCiAgICAgICAgICAgIGRhcmtfc2NyZWVuX21lc3NhZ2U6ICJBY2Nl
c3MgUmVzdHJpY3RlZCIsDQogICAgICAgICAgICBjaGVja19pbnRlcnZhbDog
NjAsDQogICAgICAgICAgICBhbGxvd19sb2NhbGhvc3Q6IHRydWUsDQogICAg
ICAgICAgICBhcGlfZW5kcG9pbnQ6ICJodHRwczovL2lwYXBpLmNvL2pzb24v
IiwNCiAgICAgICAgICAgIGZhbGxiYWNrX2FwaTogImh0dHBzOi8vd29ybGR0
aW1lYXBpLm9yZy9hcGkvaXAiDQogICAgICAgIH07DQogICAgfQ0KDQogICAg
YXN5bmMgZGV0ZWN0Q291bnRyeSgpIHsNCiAgICAgICAgdHJ5IHsNCiAgICAg
ICAgICAgIC8vIFRyeSBwcmltYXJ5IEFQSQ0KICAgICAgICAgICAgY29uc3Qg
cmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh0aGlzLmNvbmZpZy5hcGlfZW5kcG9p
bnQpOw0KICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNl
Lmpzb24oKTsNCiAgICAgICAgICAgIHRoaXMuY3VycmVudENvdW50cnkgPSBk
YXRhLmNvdW50cnlfbmFtZSB8fCBkYXRhLmNvdW50cnk7DQogICAgICAgICAg
ICBjb25zb2xlLmxvZygn8J+TjSBEZXRlY3RlZCBjb3VudHJ5OicsIHRoaXMu
Y3VycmVudENvdW50cnkpOw0KICAgICAgICB9IGNhdGNoIChlcnJvcikgew0K
ICAgICAgICAgICAgY29uc29sZS53YXJuKCfimqDvuI8gUHJpbWFyeSBBUEkg
ZmFpbGVkLCB0cnlpbmcgZmFsbGJhY2suLi4nKTsNCiAgICAgICAgICAgIA0K
ICAgICAgICAgICAgLy8gVHJ5IGZhbGxiYWNrIEFQSQ0KICAgICAgICAgICAg
dHJ5IHsNCiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0
IGZldGNoKHRoaXMuY29uZmlnLmZhbGxiYWNrX2FwaSk7DQogICAgICAgICAg
ICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTsNCiAg
ICAgICAgICAgICAgICBjb25zdCB0aW1lem9uZSA9IGRhdGEudGltZXpvbmUg
fHwgJyc7DQogICAgICAgICAgICAgICAgdGhpcy5jdXJyZW50Q291bnRyeSA9
IHRpbWV6b25lLnNwbGl0KCcvJylbMF0gfHwgJ1Vua25vd24nOw0KICAgICAg
ICAgICAgfSBjYXRjaCAoZXJyb3IyKSB7DQogICAgICAgICAgICAgICAgY29u
c29sZS5lcnJvcign4p2MIEJvdGggQVBJcyBmYWlsZWQ6JywgZXJyb3IyKTsN
CiAgICAgICAgICAgICAgICB0aGlzLmN1cnJlbnRDb3VudHJ5ID0gJ1Vua25v
d24nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgfQ0KDQogICAg
Y2hlY2tCYW5TdGF0dXMoKSB7DQogICAgICAgIGlmICghdGhpcy5jb25maWcu
ZW5hYmxlZCkgew0KICAgICAgICAgICAgdGhpcy5yZW1vdmVCYW5TY3JlZW4o
KTsNCiAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgfQ0KICAgICAgICAN
CiAgICAgICAgLy8gQWxsb3cgbG9jYWxob3N0IGlmIGNvbmZpZ3VyZWQNCiAg
ICAgICAgaWYgKHRoaXMuY29uZmlnLmFsbG93X2xvY2FsaG9zdCAmJiB0aGlz
LmlzTG9jYWxob3N0KCkpIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCfw
n4+gIExvY2FsaG9zdCBhY2Nlc3MgYWxsb3dlZCcpOw0KICAgICAgICAgICAg
dGhpcy5yZW1vdmVCYW5TY3JlZW4oKTsNCiAgICAgICAgICAgIHJldHVybjsN
CiAgICAgICAgfQ0KDQogICAgICAgIC8vIENoZWNrIGlmIGNvdW50cnkgaXMg
YmFubmVkDQogICAgICAgIGNvbnN0IGlzQmFubmVkID0gdGhpcy5pc0NvdW50
cnlCYW5uZWQoKTsNCiAgICAgICAgDQogICAgICAgIGlmIChpc0Jhbm5lZCAm
JiAhdGhpcy5pc0Jhbm5lZCkgew0KICAgICAgICAgICAgY29uc29sZS5sb2co
J+KblCBDb3VudHJ5IGJhbm5lZDonLCB0aGlzLmN1cnJlbnRDb3VudHJ5KTsN
CiAgICAgICAgICAgIHRoaXMuaXNCYW5uZWQgPSB0cnVlOw0KICAgICAgICAg
ICAgdGhpcy5zaG93QmFuU2NyZWVuKCk7DQogICAgICAgIH0gZWxzZSBpZiAo
IWlzQmFubmVkICYmIHRoaXMuaXNCYW5uZWQpIHsNCiAgICAgICAgICAgIGNv
bnNvbGUubG9nKCfinIUgQ291bnRyeSBhY2Nlc3MgZ3JhbnRlZCcpOw0KICAg
ICAgICAgICAgdGhpcy5pc0Jhbm5lZCA9IGZhbHNlOw0KICAgICAgICAgICAg
dGhpcy5yZW1vdmVCYW5TY3JlZW4oKTsNCiAgICAgICAgfQ0KICAgIH0NCg0K
ICAgIGlzTG9jYWxob3N0KCkgew0KICAgICAgICByZXR1cm4gd2luZG93Lmxv
Y2F0aW9uLmhvc3RuYW1lID09PSAnbG9jYWxob3N0JyB8fCANCiAgICAgICAg
ICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFtZSA9PT0gJzEyNy4wLjAu
MScgfHwNCiAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5ob3N0bmFt
ZSA9PT0gJyc7DQogICAgfQ0KDQogICAgaXNDb3VudHJ5QmFubmVkKCkgew0K
ICAgICAgICBpZiAoIXRoaXMuY3VycmVudENvdW50cnkgfHwgdGhpcy5jdXJy
ZW50Q291bnRyeSA9PT0gJ1Vua25vd24nKSB7DQogICAgICAgICAgICByZXR1
cm4gZmFsc2U7IC8vIERvbid0IGJhbiBpZiB3ZSBjYW4ndCBkZXRlY3QgY291
bnRyeQ0KICAgICAgICB9DQogICAgICAgIA0KICAgICAgICBjb25zdCBub3Jt
YWxpemVkQ291bnRyeSA9IHRoaXMuY3VycmVudENvdW50cnkudG9Mb3dlckNh
c2UoKTsNCiAgICAgICAgcmV0dXJuIHRoaXMuY29uZmlnLmJhbm5lZF9jb3Vu
dHJpZXMuc29tZShjb3VudHJ5ID0+IA0KICAgICAgICAgICAgY291bnRyeS50
b0xvd2VyQ2FzZSgpID09PSBub3JtYWxpemVkQ291bnRyeQ0KICAgICAgICAp
Ow0KICAgIH0NCg0KICAgIHNob3dCYW5TY3JlZW4oKSB7DQogICAgICAgIC8v
IFJlbW92ZSBleGlzdGluZyBvdmVybGF5IGlmIGFueQ0KICAgICAgICB0aGlz
LnJlbW92ZUJhblNjcmVlbigpOw0KICAgICAgICANCiAgICAgICAgLy8gQ3Jl
YXRlIGRhcmsgc2NyZWVuIG92ZXJsYXkNCiAgICAgICAgY29uc3Qgb3Zlcmxh
eSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICBv
dmVybGF5LmlkID0gJ2NvdW50cnktYmFuLW92ZXJsYXknOw0KICAgICAgICBv
dmVybGF5LnN0eWxlLmNzc1RleHQgPSBgDQogICAgICAgICAgICBwb3NpdGlv
bjogZml4ZWQ7DQogICAgICAgICAgICB0b3A6IDA7DQogICAgICAgICAgICBs
ZWZ0OiAwOw0KICAgICAgICAgICAgd2lkdGg6IDEwMHZ3Ow0KICAgICAgICAg
ICAgaGVpZ2h0OiAxMDB2aDsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxp
bmVhci1ncmFkaWVudCgxMzVkZWcsICMwZjBmMGYgMCUsICMxYTFhMWEgMTAw
JSk7DQogICAgICAgICAgICBjb2xvcjogI2ZmZjsNCiAgICAgICAgICAgIHot
aW5kZXg6IDIxNDc0ODM2NDc7DQogICAgICAgICAgICBkaXNwbGF5OiBmbGV4
Ow0KICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7DQogICAg
ICAgICAgICBhbGlnbi1pdGVtczogY2VudGVyOw0KICAgICAgICAgICAgZmxl
eC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgICAgICAgIGZvbnQtZmFtaWx5
OiAtYXBwbGUtc3lzdGVtLCBCbGlua01hY1N5c3RlbUZvbnQsICdTZWdvZSBV
SScsIFJvYm90bywgc2Fucy1zZXJpZjsNCiAgICAgICAgICAgIHRleHQtYWxp
Z246IGNlbnRlcjsNCiAgICAgICAgICAgIHBhZGRpbmc6IDQwcHg7DQogICAg
ICAgICAgICBib3gtc2l6aW5nOiBib3JkZXItYm94Ow0KICAgICAgICAgICAg
b3ZlcmZsb3c6IGhpZGRlbjsNCiAgICAgICAgYDsNCg0KICAgICAgICAvLyBD
cmVhdGUgYW5pbWF0ZWQgYmFja2dyb3VuZCBwYXR0ZXJuDQogICAgICAgIGNv
bnN0IHBhdHRlcm4gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsN
CiAgICAgICAgcGF0dGVybi5zdHlsZS5jc3NUZXh0ID0gYA0KICAgICAgICAg
ICAgcG9zaXRpb246IGFic29sdXRlOw0KICAgICAgICAgICAgdG9wOiAwOw0K
ICAgICAgICAgICAgbGVmdDogMDsNCiAgICAgICAgICAgIHdpZHRoOiAxMDAl
Ow0KICAgICAgICAgICAgaGVpZ2h0OiAxMDAlOw0KICAgICAgICAgICAgYmFj
a2dyb3VuZC1pbWFnZTogDQogICAgICAgICAgICAgICAgcmFkaWFsLWdyYWRp
ZW50KGNpcmNsZSBhdCAyNSUgMjUlLCByZ2JhKDI1NSwgMCwgMCwgMC4xKSAw
JSwgdHJhbnNwYXJlbnQgNTUlKSwNCiAgICAgICAgICAgICAgICByYWRpYWwt
Z3JhZGllbnQoY2lyY2xlIGF0IDc1JSA3NSUsIHJnYmEoMjU1LCAwLCAwLCAw
LjEpIDAlLCB0cmFuc3BhcmVudCA1NSUpOw0KICAgICAgICAgICAgei1pbmRl
eDogLTE7DQogICAgICAgIGA7DQoNCiAgICAgICAgLy8gTWFpbiBtZXNzYWdl
IGNvbnRhaW5lcg0KICAgICAgICBjb25zdCBjb250YWluZXIgPSBkb2N1bWVu
dC5jcmVhdGVFbGVtZW50KCdkaXYnKTsNCiAgICAgICAgY29udGFpbmVyLnN0
eWxlLmNzc1RleHQgPSBgDQogICAgICAgICAgICBtYXgtd2lkdGg6IDYwMHB4
Ow0KICAgICAgICAgICAgYmFja2dyb3VuZDogcmdiYSgzMCwgMzAsIDMwLCAw
LjkpOw0KICAgICAgICAgICAgcGFkZGluZzogNDBweDsNCiAgICAgICAgICAg
IGJvcmRlci1yYWRpdXM6IDIwcHg7DQogICAgICAgICAgICBib3JkZXI6IDFw
eCBzb2xpZCByZ2JhKDI1NSwgMCwgMCwgMC4zKTsNCiAgICAgICAgICAgIGJv
eC1zaGFkb3c6IDAgMjBweCA2MHB4IHJnYmEoMjU1LCAwLCAwLCAwLjIpOw0K
ICAgICAgICAgICAgYmFja2Ryb3AtZmlsdGVyOiBibHVyKDEwcHgpOw0KICAg
ICAgICBgOw0KDQogICAgICAgIC8vIFdhcm5pbmcgaWNvbg0KICAgICAgICBj
b25zdCBpY29uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7DQog
ICAgICAgIGljb24uc3R5bGUuY3NzVGV4dCA9IGANCiAgICAgICAgICAgIGZv
bnQtc2l6ZTogNjRweDsNCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIw
cHg7DQogICAgICAgICAgICBhbmltYXRpb246IHB1bHNlIDJzIGluZmluaXRl
Ow0KICAgICAgICBgOw0KICAgICAgICBpY29uLmlubmVySFRNTCA9ICfwn5qr
JzsNCg0KICAgICAgICAvLyBNYWluIG1lc3NhZ2UNCiAgICAgICAgY29uc3Qg
bWVzc2FnZSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2gxJyk7DQogICAg
ICAgIG1lc3NhZ2Uuc3R5bGUuY3NzVGV4dCA9IGANCiAgICAgICAgICAgIGZv
bnQtc2l6ZTogMjhweDsNCiAgICAgICAgICAgIG1hcmdpbjogMCAwIDIwcHgg
MDsNCiAgICAgICAgICAgIGNvbG9yOiAjZmY2YjZiOw0KICAgICAgICAgICAg
Zm9udC13ZWlnaHQ6IDYwMDsNCiAgICAgICAgICAgIGxpbmUtaGVpZ2h0OiAx
LjM7DQogICAgICAgIGA7DQogICAgICAgIG1lc3NhZ2UudGV4dENvbnRlbnQg
PSB0aGlzLmNvbmZpZy5kYXJrX3NjcmVlbl9tZXNzYWdlOw0KDQogICAgICAg
IC8vIENvdW50cnkgaW5mbw0KICAgICAgICBjb25zdCBjb3VudHJ5SW5mbyA9
IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOw0KICAgICAgICBjb3Vu
dHJ5SW5mby5zdHlsZS5jc3NUZXh0ID0gYA0KICAgICAgICAgICAgZm9udC1z
aXplOiAxOHB4Ow0KICAgICAgICAgICAgbWFyZ2luOiAxNXB4IDA7DQogICAg
ICAgICAgICBjb2xvcjogI2FhYTsNCiAgICAgICAgICAgIGJhY2tncm91bmQ6
IHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4wNSk7DQogICAgICAgICAgICBwYWRk
aW5nOiAxMnB4IDIwcHg7DQogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAx
MHB4Ow0KICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAjZmY2
YjZiOw0KICAgICAgICBgOw0KICAgICAgICBjb3VudHJ5SW5mby5pbm5lckhU
TUwgPSBgPHN0cm9uZz7wn5ONIERldGVjdGVkIExvY2F0aW9uOjwvc3Ryb25n
PiAke3RoaXMuY3VycmVudENvdW50cnkgfHwgJ1Vua25vd24nfWA7DQoNCiAg
ICAgICAgLy8gQmFubmVkIGNvdW50cmllcyBsaXN0DQogICAgICAgIGNvbnN0
IGJhbm5lZExpc3QgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTsN
CiAgICAgICAgYmFubmVkTGlzdC5zdHlsZS5jc3NUZXh0ID0gYA0KICAgICAg
ICAgICAgZm9udC1zaXplOiAxNHB4Ow0KICAgICAgICAgICAgY29sb3I6ICM4
ODg7DQogICAgICAgICAgICBtYXJnaW46IDIwcHggMDsNCiAgICAgICAgICAg
IHBhZGRpbmc6IDE1cHg7DQogICAgICAgICAgICBiYWNrZ3JvdW5kOiByZ2Jh
KDI1NSwgMCwgMCwgMC4xKTsNCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6
IDhweDsNCiAgICAgICAgICAgIHRleHQtYWxpZ246IGxlZnQ7DQogICAgICAg
IGA7DQogICAgICAgIGJhbm5lZExpc3QuaW5uZXJIVE1MID0gYA0KICAgICAg
ICAgICAgPHN0cm9uZz5SZXN0cmljdGVkIENvdW50cmllczo8L3N0cm9uZz48
YnI+DQogICAgICAgICAgICAke3RoaXMuY29uZmlnLmJhbm5lZF9jb3VudHJp
ZXMubWFwKGNvdW50cnkgPT4gDQogICAgICAgICAgICAgICAgYOKAoiAke2Nv
dW50cnl9JHtjb3VudHJ5ID09PSB0aGlzLmN1cnJlbnRDb3VudHJ5ID8gJyA8
c3BhbiBzdHlsZT0iY29sb3I6I2ZmNmI2YiI+KFlvdXIgQ291bnRyeSk8L3Nw
YW4+JyA6ICcnfWANCiAgICAgICAgICAgICkuam9pbignPGJyPicpfQ0KICAg
ICAgICBgOw0KDQogICAgICAgIC8vIENvbnRhY3QgaW5mbw0KICAgICAgICBj
b25zdCBjb250YWN0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7
DQogICAgICAgIGNvbnRhY3Quc3R5bGUuY3NzVGV4dCA9IGANCiAgICAgICAg
ICAgIGZvbnQtc2l6ZTogMTJweDsNCiAgICAgICAgICAgIGNvbG9yOiAjNjY2
Ow0KICAgICAgICAgICAgbWFyZ2luLXRvcDogMzBweDsNCiAgICAgICAgICAg
IHBhZGRpbmctdG9wOiAyMHB4Ow0KICAgICAgICAgICAgYm9yZGVyLXRvcDog
MXB4IHNvbGlkIHJnYmEoMjU1LCAyNTUsIDI1NSwgMC4xKTsNCiAgICAgICAg
YDsNCiAgICAgICAgY29udGFjdC50ZXh0Q29udGVudCA9ICdJZiB5b3UgYmVs
aWV2ZSB0aGlzIGlzIGFuIGVycm9yLCBwbGVhc2UgY29udGFjdCBzdXBwb3J0
Lic7DQoNCiAgICAgICAgLy8gQWRkIENTUyBhbmltYXRpb24NCiAgICAgICAg
Y29uc3Qgc3R5bGUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScp
Ow0KICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IGANCiAgICAgICAgICAg
IEBrZXlmcmFtZXMgcHVsc2Ugew0KICAgICAgICAgICAgICAgIDAlIHsgdHJh
bnNmb3JtOiBzY2FsZSgxKTsgb3BhY2l0eTogMTsgfQ0KICAgICAgICAgICAg
ICAgIDUwJSB7IHRyYW5zZm9ybTogc2NhbGUoMS4xKTsgb3BhY2l0eTogMC44
OyB9DQogICAgICAgICAgICAgICAgMTAwJSB7IHRyYW5zZm9ybTogc2NhbGUo
MSk7IG9wYWNpdHk6IDE7IH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgYDsN
Cg0KICAgICAgICAvLyBBc3NlbWJsZSBvdmVybGF5DQogICAgICAgIGNvbnRh
aW5lci5hcHBlbmRDaGlsZChpY29uKTsNCiAgICAgICAgY29udGFpbmVyLmFw
cGVuZENoaWxkKG1lc3NhZ2UpOw0KICAgICAgICBjb250YWluZXIuYXBwZW5k
Q2hpbGQoY291bnRyeUluZm8pOw0KICAgICAgICBjb250YWluZXIuYXBwZW5k
Q2hpbGQoYmFubmVkTGlzdCk7DQogICAgICAgIGNvbnRhaW5lci5hcHBlbmRD
aGlsZChjb250YWN0KTsNCiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChw
YXR0ZXJuKTsNCiAgICAgICAgb3ZlcmxheS5hcHBlbmRDaGlsZChjb250YWlu
ZXIpOw0KICAgICAgICBvdmVybGF5LmFwcGVuZENoaWxkKHN0eWxlKTsNCiAg
ICAgICAgDQogICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQob3Zl
cmxheSk7DQogICAgICAgIA0KICAgICAgICAvLyBQcmV2ZW50IGFsbCBpbnRl
cmFjdGlvbnMNCiAgICAgICAgZG9jdW1lbnQuYm9keS5zdHlsZS5vdmVyZmxv
dyA9ICdoaWRkZW4nOw0KICAgICAgICBkb2N1bWVudC5ib2R5LnN0eWxlLnBv
aW50ZXJFdmVudHMgPSAnbm9uZSc7DQogICAgICAgIG92ZXJsYXkuc3R5bGUu
cG9pbnRlckV2ZW50cyA9ICdhdXRvJzsNCiAgICAgICAgDQogICAgICAgIC8v
IERpc2FibGUga2V5Ym9hcmQgc2hvcnRjdXRzDQogICAgICAgIG92ZXJsYXku
YWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiBlLnByZXZlbnRE
ZWZhdWx0KCkpOw0KICAgICAgICBvdmVybGF5LnRhYkluZGV4ID0gLTE7DQog
ICAgICAgIG92ZXJsYXkuZm9jdXMoKTsNCiAgICB9DQoNCiAgICByZW1vdmVC
YW5TY3JlZW4oKSB7DQogICAgICAgIGNvbnN0IG92ZXJsYXkgPSBkb2N1bWVu
dC5nZXRFbGVtZW50QnlJZCgnY291bnRyeS1iYW4tb3ZlcmxheScpOw0KICAg
ICAgICBpZiAob3ZlcmxheSkgew0KICAgICAgICAgICAgb3ZlcmxheS5yZW1v
dmUoKTsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUub3ZlcmZs
b3cgPSAnJzsNCiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkuc3R5bGUucG9p
bnRlckV2ZW50cyA9ICcnOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy8g
UHVibGljIG1ldGhvZCB0byB1cGRhdGUgY29uZmlnDQogICAgYXN5bmMgdXBk
YXRlQ29uZmlnKG5ld0NvbmZpZykgew0KICAgICAgICB0aGlzLmNvbmZpZyA9
IHsgLi4udGhpcy5jb25maWcsIC4uLm5ld0NvbmZpZyB9Ow0KICAgICAgICB0
aGlzLmNoZWNrQmFuU3RhdHVzKCk7DQogICAgfQ0KDQogICAgLy8gUHVibGlj
IG1ldGhvZCB0byByZWZyZXNoIGNvdW50cnkgZGV0ZWN0aW9uDQogICAgYXN5
bmMgcmVmcmVzaENvdW50cnkoKSB7DQogICAgICAgIGF3YWl0IHRoaXMuZGV0
ZWN0Q291bnRyeSgpOw0KICAgICAgICB0aGlzLmNoZWNrQmFuU3RhdHVzKCk7
DQogICAgfQ0KfQ0KDQovLyBJbml0aWFsaXplIGF1dG9tYXRpY2FsbHkNCmlm
ICh0eXBlb2Ygd2luZG93ICE9PSAndW5kZWZpbmVkJykgew0KICAgIHdpbmRv
dy5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgKCkgPT4g
ew0KICAgICAgICB3aW5kb3cuQ291bnRyeUJsb2NrZXIgPSBuZXcgQ291bnRy
eUJsb2NrZXIoKTsNCiAgICAgICAgY29uc29sZS5sb2coJ/CfjI0gQ291bnRy
eSBCbG9ja2VyIGluaXRpYWxpemVkJyk7DQogICAgfSk7DQp9DQoNCi8vIEV4
cG9ydCBmb3IgbW9kdWxlIHVzYWdlDQppZiAodHlwZW9mIG1vZHVsZSAhPT0g
J3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHsNCiAgICBtb2R1bGUu
ZXhwb3J0cyA9IENvdW50cnlCbG9ja2VyOw0KfQ==
